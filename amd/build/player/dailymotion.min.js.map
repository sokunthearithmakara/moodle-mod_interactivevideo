{"version":3,"file":"dailymotion.min.js","sources":["../../src/player/dailymotion.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * DailyMotion Player class\n * Documented at https://developers.dailymotion.com/sdk/player-sdk/web/\n * @module     mod_interactivevideo/player/dailymotion\n * @copyright  2024 Sokunthearith Makara <sokunthearithmakara@gmail.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nimport {dispatchEvent} from 'core/event_dispatcher';\nimport $ from 'jquery';\nimport allowAutoplay from 'mod_interactivevideo/player/checkautoplay';\nlet player;\nclass DailyMotion {\n    /**\n     * Construct a new DailyMotion player instance.\n     */\n    constructor() {\n        this.type = 'dailymotion';\n        this.frequency = 0.27;\n        this.support = {\n            playbackrate: true,\n            quality: true,\n            password: true,\n        };\n        this.useAnimationFrame = false;\n    }\n    /**\n     * Loads a new Dailymotion player instance.\n     *\n     * @param {string} url - The URL of the Dailymotion video.\n     * @param {number} start - The start time of the video in seconds.\n     * @param {number} end - The end time of the video in seconds.\n     * @param {object} opts - The options for the player.\n     */\n    async load(url, start, end, opts = {}) {\n        const showControls = opts.showControls || false;\n        const customStart = opts.customStart || false;\n        const node = opts.node || 'player';\n        this.start = start;\n\n        this.allowAutoplay = await allowAutoplay(document.getElementById(node));\n        if (!this.allowAutoplay) {\n            dispatchEvent('iv:autoplayBlocked');\n        }\n        const reg = /(?:https?:\\/\\/)?(?:www\\.)?(?:dai\\.ly|dailymotion\\.com)\\/(?:embed\\/video\\/|video\\/|)([^/]+)/g;\n        const match = reg.exec(url);\n        const videoId = match[1];\n        this.videoId = videoId;\n        var self = this;\n        self.aspectratio = 16 / 9; //\n        self.posterImage = '';\n        if (opts.editform) {\n            fetch(`https://api.dailymotion.com/video/${videoId}?fields=thumbnail_720_url`)\n                .then(response => response.json())\n                .then(data => {\n                    self.posterImage = data.thumbnail_720_url;\n                    return;\n                })\n                .catch(() => {\n                    return;\n                });\n        }\n        var ready = false;\n        var dmOptions = {\n            video: videoId,\n            params: {\n                startTime: start,\n                mute: true,\n            },\n        };\n        let dailymotion;\n        const dailymotionEvents = async(player) => {\n            const state = await player.getState();\n            if (state.playerIsViewable === false && state.videoDuration == 0) {\n                dispatchEvent('iv:playerError', {error: 'Video is not viewable.'});\n                return;\n            }\n\n            player.off(dailymotion.events.VIDEO_DURATIONCHANGE);\n            if ((state.videoIsPasswordRequired && state.videoDuration == 0) || state.videoDuration == 0) {\n                player.on(dailymotion.events.VIDEO_DURATIONCHANGE, function() {\n                    dailymotionEvents(player);\n                });\n                return;\n            }\n            self.aspectratio = await self.ratio();\n            const totaltime = Number(state.videoDuration.toFixed(2)) - self.frequency;\n            end = !end ? totaltime : Math.min(end, totaltime);\n            end = Number(end.toFixed(2));\n            self.end = end;\n            self.totaltime = totaltime;\n            self.duration = self.end - self.start;\n            self.title = state.videoTitle;\n\n            // Get the available captions.\n            // Unset the captions.\n            player.setSubtitles(null);\n            let tracks = state.videoSubtitlesList;\n            if (tracks && tracks.length > 0) {\n                tracks = tracks.map(track => {\n                    const locale = track.split('-')[0];\n                    const country = track.split('-')[1];\n                    let displayNames;\n                    try {\n                        displayNames = new Intl.DisplayNames([`${M.cfg.language}`], {type: 'language'});\n                    } catch (e) {\n                        displayNames = new Intl.DisplayNames(['en'], {type: 'language'});\n                    }\n                    let label;\n                    if (country == 'auto') {\n                        label = displayNames.of(locale) + ' (Auto)';\n                    } else {\n                        label = displayNames.of(track) ?? track.toUpperCase();\n                    }\n                    return {\n                        label,\n                        code: track,\n                    };\n                });\n                self.captions = tracks;\n            }\n\n            // Fire iv:playerLoaded event\n            dispatchEvent('iv:playerLoaded', {\n                tracks: tracks, qualities: self.getQualities(),\n            });\n\n            // If the browser blocks autoplay, we need to show the play button.\n            if (!state.playerIsPlaybackAllowed && !ready) {\n                dispatchEvent('iv:playerReady', null, document.getElementById(node));\n                $('#start-screen #play').removeClass('d-none');\n                $('#start-screen #spinner').remove();\n                $('.video-block, #video-block').addClass('no-pointer bg-transparent');\n                // $('#start-screen').addClass('no-pointer');\n                $('#annotation-canvas').removeClass('d-none');\n            }\n\n            // Handle Dailymotion behavior. Video always start from the start time,\n            // So if you seek before starting the video, it will just start from the beginning.\n            // So, to deal with this, we have to start the video as soon as the player is ready.\n            // Let it play on mute which sometimes include ads. When the ad is done, the VIDEO_START event will fire.\n            // That's when we let user know, player is ready.\n            const playerEvents = () => {\n                player.on(dailymotion.events.VIDEO_END, function() {\n                    self.ended = true;\n                    dispatchEvent('iv:playerEnded');\n                });\n\n                player.off(dailymotion.events.VIDEO_TIMECHANGE);\n                player.on(dailymotion.events.VIDEO_TIMECHANGE, async function(e) {\n                    if (!ready) {\n                        return;\n                    }\n                    if (e.videoTime < start) {\n                        player.seek(start);\n                    }\n                    if (e.videoTime > end + self.frequency) {\n                        player.seek(end - 1);\n                    }\n                    if (self.ended) {\n                        dispatchEvent('iv:playerEnded');\n                        self.ended = false;\n                    } else {\n                        if (e.playerIsPlaying === true) {\n                            dispatchEvent('iv:playerPlaying');\n                            self.ended = false;\n                            self.paused = false;\n                        }\n                        if (e.videoTime >= end) {\n                            dispatchEvent('iv:playerEnded');\n                            self.ended = true;\n                        }\n                    }\n                });\n\n                player.on(dailymotion.events.VIDEO_PLAY, async function(e) {\n                    if (!ready) {\n                        return;\n                    }\n                    if (self.ended || e.videoTime >= end) {\n                        self.ended = false;\n                        player.seek(start);\n                    }\n                    self.paused = false;\n                    dispatchEvent('iv:playerPlaying');\n                });\n\n                player.on(dailymotion.events.VIDEO_PAUSE, async function() {\n                    if (!ready) {\n                        return;\n                    }\n                    self.paused = true;\n                    if (player.getState().videoTime >= end) {\n                        self.ended = true;\n                        dispatchEvent('iv:playerEnded');\n                    } else {\n                        dispatchEvent('iv:playerPaused');\n                    }\n                });\n\n                player.on(dailymotion.events.PLAYER_ERROR, function(e) {\n                    dispatchEvent('iv:playerError', {error: e});\n                });\n\n                player.on(dailymotion.events.PLAYER_PLAYBACKSPEEDCHANGE, function(e) {\n                    dispatchEvent('iv:playerRateChange', {rate: e.playerPlaybackSpeed});\n                });\n\n                player.on(dailymotion.events.VIDEO_QUALITYCHANGE, function(e) {\n                    dispatchEvent('iv:playerQualityChange', {quality: e.videoQuality});\n                });\n            };\n\n            if (customStart) {\n                player.setMute(true);\n                player.play(); // Start the video to get the ad out of the way.\n                player.on(dailymotion.events.VIDEO_TIMECHANGE, function() {\n                    $(\"#start-screen\").removeClass('bg-transparent');\n                    if (ready == true) { // When the video is replayed, it will fire VIDEO_START event again.\n                        player.setMute(true);\n                    }\n                    setTimeout(async() => {\n                        if (state.playerIsPlaybackAllowed) {\n                            player.pause();\n                        }\n                        player.seek(start);\n                        player.setMute(false);\n                        if (!ready) {\n                            playerEvents();\n                            ready = true;\n                            if (state.playerIsPlaybackAllowed) {\n                                dispatchEvent('iv:playerReady');\n                            }\n                        }\n                    }, state.playerIsPlaybackAllowed ? 1000 : 0);\n                });\n            } else {\n                playerEvents();\n                ready = true;\n                if (state.playerIsPlaybackAllowed) {\n                    dispatchEvent('iv:playerReady');\n                }\n            }\n\n            // Show ads to user so they know ad is playing, not because something is wrong.\n            player.on(dailymotion.events.AD_START, function() {\n                $(\".video-block, #video-block\").addClass('d-none');\n                $(\"#start-screen\").addClass('d-none');\n                $('#annotation-canvas').removeClass('d-none');\n            });\n\n            player.on(dailymotion.events.AD_END, function() {\n                $(\".video-block, #video-block\").removeClass('d-none');\n                $(\"#start-screen\").removeClass('d-none');\n            });\n        };\n\n        if (!window.dailymotion) {\n            // Add dailymotion script.\n            // At the time of writing this, the dailymotion player script is not generally available.\n            // Developers must set up the players and get the script from the dailymotion website.\n            var tag = document.createElement('script');\n            if (showControls || opts.passwordprotected) {\n                // If password protected, show controls; otherwise, users can't enter the password.\n                // (Possible bug on Dailymotion side)\n                // If you fork this, change this to your own dailymotion player.\n                tag.src = \"https://geo.dailymotion.com/libs/player/xsyje.js\";\n            } else {\n                // If you fork this, change this to your own dailymotion player.\n                tag.src = \"https://geo.dailymotion.com/libs/player/xsyj8.js\";\n            }\n            var firstScriptTag = document.getElementsByTagName('script')[0];\n            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n\n            window.dailymotion = {\n                onScriptLoaded: async() => {\n                    dailymotion = window.dailymotion;\n                    player = await dailymotion.createPlayer(node, dmOptions);\n                    dailymotionEvents(player);\n                }\n            };\n        } else {\n            player = await window.dailymotion.createPlayer(node, dmOptions);\n            dailymotionEvents(player);\n            dailymotion = window.dailymotion;\n        }\n    }\n    /**\n     * Plays the Dailymotion video using the player instance.\n     */\n    play() {\n        player.play();\n        this.paused = false;\n    }\n    /**\n     * Pauses the Dailymotion player.\n     *\n     * This method calls the `pause` function on the `player` object to halt video playback.\n     */\n    async pause() {\n        if (this.paused) {\n            return false;\n        }\n        await player.pause();\n        this.paused = true;\n        return true;\n    }\n    /**\n     * Stops the video playback and seeks to the specified start time.\n     *\n     * @param {number} starttime - The time (in seconds) to seek to before pausing the video.\n     */\n    stop(starttime) {\n        player.seek(starttime);\n        player.pause();\n    }\n    /**\n     * Seeks the video player to a specified time.\n     *\n     * @param {number} time - The time in seconds to seek to.\n     * @returns {Promise<void>} A promise that resolves when the seek operation is complete.\n     */\n    async seek(time) {\n        await player.seek(time);\n        this.ended = false;\n        dispatchEvent('iv:playerSeek', {time: time});\n    }\n    /**\n     * Retrieves the current playback time of the video.\n     *\n     * @returns {Promise<number>} A promise that resolves to the current video time in seconds.\n     */\n    async getCurrentTime() {\n        const state = await player.getState();\n        return state.videoTime;\n    }\n    /**\n     * Asynchronously retrieves the duration of the video.\n     *\n     * @returns {Promise<number>} A promise that resolves to the duration of the video in seconds.\n     */\n    async getDuration() {\n        const state = await player.getState();\n        return state.videoDuration;\n    }\n    /**\n     * Checks if the Dailymotion player is paused.\n     *\n     * @async\n     * @function isPaused\n     * @returns {Promise<boolean>} A promise that resolves to a boolean indicating whether the player is paused.\n     */\n    async isPaused() {\n        if (this.paused) {\n            return true;\n        }\n        const state = await player.getState();\n        return !state.playerIsPlaying;\n    }\n    /**\n     * Checks if the Dailymotion player is currently playing.\n     *\n     * @returns {Promise<boolean>} A promise that resolves to a boolean indicating if the player is playing.\n     */\n    async isPlaying() {\n        if (this.paused) {\n            return false;\n        }\n        const state = await player.getState();\n        return state.playerIsPlaying;\n    }\n\n    /**\n     * Checks if the Dailymotion player has ended and is on the replay screen.\n     *\n     * @returns {Promise<boolean>} A promise that resolves to a boolean indicating if the player is on the replay screen.\n     */\n    async isEnded() {\n        if (this.ended) {\n            return true;\n        }\n        const state = await player.getState();\n        return state.playerIsReplayScreen;\n    }\n    /**\n     * Calculates the aspect ratio of the player and compares it to 16:9.\n     * If the player's aspect ratio is greater than 16:9, it returns the player's aspect ratio.\n     * Otherwise, it returns 16:9.\n     *\n     * @returns {Promise<number>} The aspect ratio of the player or 16:9.\n     */\n    async ratio() {\n        const state = await player.getState();\n        const ratio = state.playerAspectRatio.split(':');\n        return ratio[0] / ratio[1];\n    }\n    /**\n     * Destroys the Dailymotion player instance.\n     *\n     * This method calls the `destroy` method on the `player` object to clean up\n     * and release any resources held by the player.\n     */\n    destroy() {\n        player.off();\n        player.destroy();\n    }\n    /**\n     * Asynchronously retrieves the current state of the player.\n     *\n     * @returns {Promise<Object>} A promise that resolves to the current state of the player.\n     */\n    async getState() {\n        const state = await player.getState();\n        return state;\n    }\n    /**\n     * Sets the playback speed of the Dailymotion player.\n     *\n     * @param {number} rate - The playback rate to set.\n     */\n    setRate(rate) {\n        player.setPlaybackSpeed(rate);\n    }\n    /**\n     * Mutes the Dailymotion player.\n     *\n     * This method sets the player's mute state to true, effectively silencing any audio.\n     */\n    mute() {\n        player.setMute(true);\n    }\n    /**\n     * Unmutes the Dailymotion player.\n     */\n    unMute() {\n        player.setMute(false);\n        player.setVolume(1);\n    }\n    /**\n     * Returns the original Dailymotion player instance.\n     *\n     * @returns {Object} The Dailymotion player instance.\n     */\n    originalPlayer() {\n        return player;\n    }\n    /**\n     * Sets the quality of the video player.\n     *\n     * @param {string} quality - The desired quality level for the video player.\n     */\n    setQuality(quality) {\n        player.setQuality(quality);\n    }\n    /**\n     * Retrieves the available video qualities and the current quality setting.\n     *\n     * @returns {Promise<Object>} An object containing:\n     * - `qualities` {Array<string>}: A list of available video qualities including 'default'.\n     * - `qualitiesLabel` {Array<string>}: A list of video quality labels including 'Auto'.\n     * - `currentQuality` {string}: The current video quality setting, 'default' if set to 'Auto'.\n     */\n    async getQualities() {\n        let states = await this.getState();\n        return {\n            qualities: ['default', ...states.videoQualitiesList],\n            qualitiesLabel: ['Auto', ...states.videoQualitiesList],\n            currentQuality: states.videoQuality == 'Auto' ? 'default' : states.videoQuality,\n        };\n    }\n\n    /**\n     * Sets the caption track for the video player.\n     * @param {string} track - The caption track to set.\n     */\n    setCaption(track) {\n        player.setSubtitles(track);\n    }\n}\n\nexport default DailyMotion;"],"names":["player","constructor","type","frequency","support","playbackrate","quality","password","useAnimationFrame","url","start","end","opts","showControls","customStart","node","allowAutoplay","document","getElementById","this","videoId","exec","self","aspectratio","posterImage","editform","fetch","then","response","json","data","thumbnail_720_url","catch","ready","dmOptions","video","params","startTime","mute","dailymotion","dailymotionEvents","async","state","getState","playerIsViewable","videoDuration","error","off","events","VIDEO_DURATIONCHANGE","videoIsPasswordRequired","on","ratio","totaltime","Number","toFixed","Math","min","duration","title","videoTitle","setSubtitles","tracks","videoSubtitlesList","length","map","track","locale","split","country","displayNames","label","Intl","DisplayNames","M","cfg","language","e","of","toUpperCase","code","captions","qualities","getQualities","playerIsPlaybackAllowed","removeClass","remove","addClass","playerEvents","VIDEO_END","ended","VIDEO_TIMECHANGE","videoTime","seek","playerIsPlaying","paused","VIDEO_PLAY","VIDEO_PAUSE","PLAYER_ERROR","PLAYER_PLAYBACKSPEEDCHANGE","rate","playerPlaybackSpeed","VIDEO_QUALITYCHANGE","videoQuality","setMute","play","setTimeout","pause","AD_START","AD_END","window","createPlayer","tag","createElement","passwordprotected","src","firstScriptTag","getElementsByTagName","parentNode","insertBefore","onScriptLoaded","stop","starttime","time","playerIsReplayScreen","playerAspectRatio","destroy","setRate","setPlaybackSpeed","unMute","setVolume","originalPlayer","setQuality","states","videoQualitiesList","qualitiesLabel","currentQuality","setCaption"],"mappings":"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"}