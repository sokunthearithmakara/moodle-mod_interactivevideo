{"version":3,"file":"sproutvideo.min.js","sources":["../../src/player/sproutvideo.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Sprout Video Player class\n *\n * @module     mod_interactivevideo/player/sproutvideo\n * @copyright  2024 Sokunthearith Makara <sokunthearithmakara@gmail.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nimport {dispatchEvent} from 'core/event_dispatcher';\nimport $ from 'jquery';\nimport allowAutoplay from 'mod_interactivevideo/player/checkautoplay';\n\nlet player = {};\n\nclass SproutVideo {\n    /**\n     * Constructs a new Sprout Video player instance.\n     */\n    constructor() {\n        this.type = 'sproutvideo';\n        this.useAnimationFrame = true;\n        this.support = {\n            playbackrate: true,\n            quality: true,\n            password: true,\n        };\n        this.frequency = 0.1;\n    }\n    async getInfo(url, node) {\n        this.node = node;\n        let regex = /(?:https?:\\/\\/)?(?:[^.]+\\.)*(?:sproutvideo\\.com\\/(?:videos|embed)|vids\\.io\\/videos)\\/(.+)/;\n        let match = regex.exec(url);\n        if (!match) {\n            return Promise.reject(new Error('Invalid SproutVideo URL'));\n        }\n        let videoId = match[1];\n        if (!url.includes('embed')) {\n            videoId = videoId.split('/')[0];\n        }\n        this.videoId = videoId;\n        let self = this;\n        const getData = async() => {\n            try {\n                const data = await $.ajax({\n                    url: `https://sproutvideo.com/oembed.json?url=https://sproutvideo.com/videos/${videoId}`,\n                    type: 'GET',\n                    dataType: 'json',\n                });\n                return data;\n            } catch {\n                return {error: true};\n            }\n        };\n\n        let data = await getData();\n        let iframeurl = '';\n        if (data.error) {\n            iframeurl = `https://videos.sproutvideo.com/embed/${videoId}`;\n            self.title = 'Private Video';\n            self.aspectratio = 16 / 9;\n            if (!url.includes('embed')) {\n                return Promise.reject(new Error('Video not found'));\n            }\n        } else {\n            self.title = data.title;\n            self.aspectratio = data.width / data.height;\n            self.posterImage = data.thumbnail_url;\n            // Get iframe url from data.html\n            let iframe = $(data.html);\n            iframeurl = iframe.attr('src');\n        }\n\n        iframeurl += '?fullscreenButton=false&volume=0';\n\n        $(`#${node}`).replaceWith(`<iframe id=\"${node}\" class='sproutvideo-player'\n                 src='${iframeurl}' frameborder='0' referrerpolicy=\"no-referrer-when-downgrade\"\n                  allow=\"autoplay; fullscreen; picture-in-picture; encrypted-media;\"></iframe>`);\n\n        return new Promise((resolve, reject) => {\n            const executeFunction = (playerInstance) => {\n                playerInstance.bind('ready', function() {\n                    try {\n                        let result = {\n                            duration: playerInstance.getDuration(),\n                            title: self.title,\n                            posterImage: self.posterImage,\n                        };\n                        resolve(result);\n                    } catch (e) {\n                        reject(e);\n                    }\n                });\n                playerInstance.bind('error', function(e) {\n                    reject(e);\n                });\n            };\n\n            /**\n             *\n             */\n            function createPlayerAndBind() {\n                try {\n                    player[node] = new window.SV.Player({videoId: videoId.split('/')[0]});\n                    executeFunction(player[node]);\n                } catch (e) {\n                    reject(e);\n                }\n            }\n\n            if (!window.SV) {\n                var tag = document.createElement('script');\n                tag.src = 'https://c.sproutvideo.com/player_api.js';\n                tag.async = true;\n                tag.as = \"script\";\n                tag.rel = \"preload\";\n                var firstScriptTag = document.getElementsByTagName('script')[0];\n                firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n                tag.onload = createPlayerAndBind;\n                tag.onerror = function() {\n                    reject(new Error('Failed to load SproutVideo API'));\n                };\n            } else {\n                createPlayerAndBind();\n            }\n        });\n    }\n\n    /**\n     * Load a Sprout Video player instance.\n     * Documented at https://sproutvideo.com/help/articles/27-javascript_player_api\n     *\n     * @param {string} url - The URL of the Sprout Video video.\n     * @param {number} start - The start time of the video in seconds.\n     * @param {number} end - The end time of the video in seconds.\n     * @param {object} opts - The options for the player.\n     */\n    async load(url, start, end, opts = {}) {\n        const showControls = opts.showControls || false;\n        const node = opts.node || 'player';\n        this.node = node;\n        this.allowAutoplay = await allowAutoplay(document.getElementById(node));\n        if (!this.allowAutoplay) {\n            dispatchEvent('iv:autoplayBlocked');\n        }\n        this.start = start;\n        this.end = end;\n        let regex = /(?:https?:\\/\\/)?(?:[^.]+\\.)*(?:sproutvideo\\.com\\/(?:videos|embed)|vids\\.io\\/videos)\\/(.+)/;\n        let match = regex.exec(url);\n        let videoId = match[1];\n        if (!url.includes('embed')) {\n            videoId = videoId.split('/')[0];\n        }\n        this.videoId = videoId;\n        let ready = false;\n        let self = this;\n\n        self.ended = false;\n        self.paused = false;\n\n        const executeFunction = (player) => {\n            player.bind('ready', function() {\n                let totaltime = Number(player.getDuration()).toFixed(2) - self.frequency;\n                end = !end || end == 0 ? totaltime : Math.min(end, totaltime);\n                end = Number(end).toFixed(2);\n                self.end = end;\n                self.totaltime = totaltime;\n                self.duration = self.end - self.start;\n                ready = true;\n                dispatchEvent('iv:playerReady', null, document.getElementById(node));\n                player.setVolume(1.0);\n            });\n\n            player.bind('qualityLevels', function(event) {\n                self.qualities = event.data;\n            });\n\n            player.bind('qualityLevelChange', function(event) {\n                dispatchEvent('iv:playerQualityChange', {quality: event.data.height});\n            });\n\n            player.bind('rateChange', function(event) {\n                dispatchEvent('iv:playerRateChange', {rate: event.data});\n            });\n\n            player.bind('progress', function(event) {\n                if (!ready) {\n                    player.setVolume(0.0);\n                    return;\n                }\n                let currentTime = event.data.time;\n                if (currentTime < start) {\n                    player.seek(start);\n                }\n                if (currentTime >= end) {\n                    player.seek(start);\n                    dispatchEvent('iv:playerEnded');\n                    self.ended = true;\n                }\n            });\n\n            player.bind('play', function() {\n                if (!ready) {\n                    player.setVolume(0.0);\n                    return;\n                }\n                let currentTime = player.getCurrentTime();\n                if (self.ended || currentTime >= end) {\n                    player.seek(start);\n                }\n                self.paused = false;\n                self.ended = false;\n                dispatchEvent('iv:playerPlay');\n                dispatchEvent('iv:playerPlaying');\n            });\n\n            player.bind('pause', function() {\n                if (!ready) {\n                    return;\n                }\n                self.paused = true;\n                if (player.getCurrentTime() >= end) {\n                    dispatchEvent('iv:playerEnded');\n                    self.ended = true;\n                } else {\n                    dispatchEvent('iv:playerPaused');\n                }\n            });\n\n            player.bind('completed', function() {\n                self.ended = true;\n                dispatchEvent('iv:playerEnded');\n            });\n\n            player.bind('volume', function(e) {\n                dispatchEvent('iv:playerVolumeChange', {volume: e.data});\n            });\n        };\n\n        // Get video info using oEmbed: https://sproutvideo.com/oembed.json?url=https://sproutvideo.com/videos/ac91d7b31a1ee6c125.\n\n        const getData = async() => {\n            try {\n                const data = await $.ajax({\n                    url: `https://sproutvideo.com/oembed.json?url=https://sproutvideo.com/videos/${videoId}`,\n                    type: 'GET',\n                    dataType: 'json',\n                });\n                return data;\n            } catch {\n                return {error: true};\n            }\n        };\n        let data = await getData();\n        let iframeurl = '';\n        if (data.error) {\n            iframeurl = `https://videos.sproutvideo.com/embed/${videoId}`;\n            self.title = 'Private Video';\n            self.aspectratio = 16 / 9;\n            if (!url.includes('embed')) {\n                dispatchEvent('iv:playerError', {message: 'Video not found'});\n            }\n        } else {\n            self.title = data.title;\n            self.aspectratio = data.width / data.height;\n            self.posterImage = data.thumbnail_url;\n            // Get iframe url from data.html\n            let iframe = $(data.html);\n            iframeurl = iframe.attr('src');\n        }\n\n        iframeurl += '?fullscreenButton=false&volume=0';\n        if (!showControls) {\n            iframeurl += '&showControls=false&bigPlayButton=false';\n        }\n        if (start > 0) {\n            iframeurl += `&t=${start}`;\n        }\n\n        $.get(iframeurl).catch(() => {\n            dispatchEvent('iv:playerError', {message: 'Video not found'});\n        });\n\n        $('.video-block').remove();\n        $('#annotation-canvas').removeClass('d-none w-0');\n        $(`#${node}`).replaceWith(`<iframe id=\"${node}\" class='sproutvideo-player'\n                 src='${iframeurl}' frameborder='0' referrerpolicy=\"no-referrer-when-downgrade\"\n                  allow=\"autoplay; fullscreen; picture-in-picture; encrypted-media;\"></iframe>`);\n\n        // Create a player instance.\n        if (!window.SV) {\n            var tag = document.createElement('script');\n            tag.src = 'https://c.sproutvideo.com/player_api.js';\n            tag.async = true;\n            tag.as = \"script\";\n            tag.rel = \"preload\";\n            var firstScriptTag = document.getElementsByTagName('script')[0];\n            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n            tag.onload = function() {\n                player[node] = new window.SV.Player({videoId: videoId.split('/')[0]});\n                executeFunction(player[node]);\n            };\n        } else {\n            player[node] = new window.SV.Player({videoId: videoId.split('/')[0]});\n            executeFunction(player[node]);\n        }\n\n    }\n    /**\n     * Plays the video using the Sprout Video player instance.\n     * If the player is not initialized, logs an error to the console.\n     */\n    play() {\n        if (!player[this.node]) {\n            return;\n        }\n        player[this.node].play();\n        this.paused = false;\n    }\n    /**\n     * Pauses the Sprout Video player.\n     *\n     * This method calls the `pause` function on the `player` object to pause the video playback.\n     */\n    pause() {\n        if (!player[this.node]) {\n            return;\n        }\n        player[this.node].pause();\n        this.paused = true;\n    }\n    /**\n     * Stops the video playback and sets the current time to the specified start time.\n     *\n     * @param {number} starttime - The time in seconds to which the video should be set before pausing.\n     */\n    stop(starttime) {\n        if (!player[this.node]) {\n            return;\n        }\n        player[this.node].seek(starttime);\n        player[this.node].pause();\n    }\n    /**\n     * Seeks the video to a specified time.\n     *\n     * @param {number} time - The time in seconds to seek to.\n     * @returns {Promise<number>} A promise that resolves to the time in seconds to which the video was seeked.\n     */\n    seek(time) {\n        if (!player[this.node]) {\n            return time;\n        }\n        if (time < 0) {\n            time = 0;\n        }\n        this.ended = false;\n        let currentTime = this.getCurrentTime();\n        dispatchEvent('iv:playerSeekStart', {time: currentTime});\n        player[this.node].seek(time);\n        dispatchEvent('iv:playerSeek', {time: time});\n        return true;\n    }\n    /**\n     * Retrieves the current playback time of the video.\n     *\n     * @returns {Promise<number>} A promise that resolves to the current time in seconds.\n     */\n    async getCurrentTime() {\n        if (!player[this.node]) {\n            return 0;\n        }\n        return player[this.node].getCurrentTime();\n    }\n    /**\n     * Asynchronously retrieves the duration of the video.\n     *\n     * @returns {Promise<number>} A promise that resolves to the duration of the video in seconds.\n     */\n    async getDuration() {\n        if (!player[this.node]) {\n            return 0;\n        }\n        const duration = await player[this.node].getDuration();\n        return duration;\n    }\n    /**\n     * Checks if the Sprout Video player is paused.\n     *\n     * @returns {Promise<boolean>} A promise that resolves to a boolean indicating whether the player is paused.\n     */\n    isPaused() {\n        if (!player[this.node]) {\n            return true;\n        }\n        return this.paused;\n    }\n    /**\n     * Checks if the Sprout Video player is currently playing.\n     *\n     * @returns {Promise<boolean>} A promise that resolves to `true` if the player is playing, otherwise `false`.\n     */\n    isPlaying() {\n        if (!player[this.node]) {\n            return false;\n        }\n        return !this.paused;\n    }\n    /**\n     * Checks if the Sprout Video player has ended.\n     *\n     * @async\n     * @function isEnded\n     * @returns {Promise<boolean>} A promise that resolves to a boolean indicating whether the player has ended.\n     */\n    isEnded() {\n        if (!player[this.node]) {\n            return false;\n        }\n        return this.ended;\n    }\n    /**\n     * Calculates the aspect ratio of the video.\n     * If the video's aspect ratio is greater than 16:9, it returns the actual aspect ratio.\n     * Otherwise, it returns the 16:9 aspect ratio.\n     *\n     * @returns {Promise<number>} The aspect ratio of the video.\n     */\n    ratio() {\n        if (!player[this.node]) {\n            return 16 / 9;\n        }\n        return this.aspectratio;\n    }\n    /**\n     * Destroys the Sprout Video player instance if it is initialized.\n     * If the player is not initialized, logs an error message to the console.\n     */\n    destroy() {\n        if (player[this.node]) {\n            $(`#${this.node}`).remove();\n            player[this.node].unbind();\n        } else {\n            window.console.error('Player is not initialized.');\n        }\n        player[this.node] = null;\n        dispatchEvent('iv:playerDestroyed');\n    }\n    /**\n     * Asynchronously retrieves the current state of the video player.\n     *\n     * @returns {Promise<string>} A promise that resolves to a string indicating the player's state, either 'paused' or 'playing'.\n     */\n    getState() {\n        if (!player[this.node]) {\n            return 'paused';\n        }\n        const paused = this.paused;\n        return paused ? 'paused' : 'playing';\n    }\n    /**\n     * Sets the playback rate for the Sprout Video player.\n     *\n     * @param {number} rate - The desired playback rate.\n     *                        This should be a value supported by the Sprout Video player.\n     */\n    setRate(rate) {\n        if (!player[this.node]) {\n            return;\n        }\n        player[this.node].setPlaybackRate(rate);\n    }\n    /**\n     * Mutes the Sprout Video player by setting the volume to 0.\n     */\n    mute() {\n        if (!player[this.node]) {\n            return;\n        }\n        player[this.node].setVolume(0.0);\n    }\n    /**\n     * Unmutes the Sprout Video player by setting the volume to 1.\n     */\n    unMute() {\n        if (!player[this.node]) {\n            return;\n        }\n        player[this.node].setVolume(1.0);\n    }\n\n    isMuted() {\n        if (!player[this.node]) {\n            return false;\n        }\n        return player[this.node].getVolume() === 0;\n    }\n\n    /**\n     * Set quality of the video\n     * @param {String} quality\n     */\n    setQuality(quality) {\n        if (!player[this.node]) {\n            return quality;\n        }\n        player[this.node].setQualityLevel(quality);\n        return quality;\n    }\n    /**\n     * Get the available qualities of the video\n     */\n    async getQualities() {\n        if (!player[this.node]) {\n            return null;\n        }\n        let qualities = this.qualities;\n        let keys = qualities.map(x => x.height);\n        // Add auto quality to the top of the list\n        keys.unshift('auto');\n        let values = qualities.map(x => x.label);\n        // Add auto quality to the top of the list\n        values.unshift('Auto');\n        let current = player[this.node].getQualityLevel();\n        return {\n            qualities: keys,\n            qualitiesLabel: values,\n            currentQuality: current,\n        };\n    }\n\n    /**\n     * Set subtitle\n     *\n     */\n    setCaption() {\n        if (!player[this.node]) {\n            return null;\n        }\n        // Not supported\n        return false;\n    }\n\n    /**\n     * Returns the original Sprout Video player instance.\n     *\n     * @returns {Object} The Sprout Video player instance.\n     */\n    originalPlayer() {\n        return player[this.node];\n    }\n}\n\nexport default SproutVideo;"],"names":["player","constructor","type","useAnimationFrame","support","playbackrate","quality","password","frequency","url","node","match","exec","Promise","reject","Error","videoId","includes","split","self","this","data","async","$","ajax","dataType","error","getData","iframeurl","title","aspectratio","width","height","posterImage","thumbnail_url","html","attr","replaceWith","resolve","createPlayerAndBind","window","SV","Player","playerInstance","bind","result","duration","getDuration","e","tag","document","createElement","src","as","rel","firstScriptTag","getElementsByTagName","parentNode","insertBefore","onload","onerror","start","end","opts","showControls","allowAutoplay","getElementById","ready","ended","paused","executeFunction","totaltime","Number","toFixed","Math","min","setVolume","event","qualities","rate","currentTime","time","seek","getCurrentTime","volume","message","get","catch","remove","removeClass","play","pause","stop","starttime","isPaused","isPlaying","isEnded","ratio","destroy","unbind","console","getState","setRate","setPlaybackRate","mute","unMute","isMuted","getVolume","setQuality","setQualityLevel","keys","map","x","unshift","values","label","qualitiesLabel","currentQuality","getQualityLevel","setCaption","originalPlayer"],"mappings":"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"}