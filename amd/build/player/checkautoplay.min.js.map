{"version":3,"file":"checkautoplay.min.js","sources":["../../src/player/checkautoplay.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * TODO describe module checkautoplay\n *\n * @module     mod_interactivevideo/player/checkautoplay\n * @copyright  2025 Sokunthearith Makara <sokunthearithmakara@gmail.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nconst allowAutoplay = (node) => {\n    return new Promise((resolve) => {\n        // Create a video element after the node.\n        const video = document.createElement('video');\n        // Set visibility to hidden.\n        video.style.visibility = 'hidden';\n        // Set the video source.\n        const src = M.cfg.wwwroot + '/mod/interactivevideo/sounds/sample.mp4';\n        video.src = src;\n        // Mute the video.\n        video.setAttribute('muted', true);\n        // Set the autoplay attribute.\n        video.setAttribute('autoplay', true);\n        video.setAttribute('playsinline', true);\n        // Place the video element after the node.\n        node.after(video);\n        // Try to play the video.\n        video.play().then(() => {\n            // Autoplay is allowed.\n            video.remove();\n            resolve(true);\n        }).catch(() => {\n            // Autoplay is not allowed.\n            video.remove();\n            resolve(false);\n        });\n    });\n};\n\nexport default allowAutoplay;"],"names":["node","Promise","resolve","video","document","createElement","style","visibility","src","M","cfg","wwwroot","setAttribute","after","play","then","remove","catch"],"mappings":"gLAuBuBA,MACZ,IAAIC,SAASC,gBAEVC,MAAQC,SAASC,cAAc,SAErCF,MAAMG,MAAMC,WAAa,eAEnBC,IAAMC,EAAEC,IAAIC,QAAU,0CAC5BR,MAAMK,IAAMA,IAEZL,MAAMS,aAAa,SAAS,GAE5BT,MAAMS,aAAa,YAAY,GAC/BT,MAAMS,aAAa,eAAe,GAElCZ,KAAKa,MAAMV,OAEXA,MAAMW,OAAOC,MAAK,KAEdZ,MAAMa,SACNd,SAAQ,MACTe,OAAM,KAELd,MAAMa,SACNd,SAAQ"}