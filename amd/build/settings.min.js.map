{"version":3,"file":"settings.min.js","sources":["../src/settings.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Module for settings page.\n *\n * @module     mod_interactivevideo/settings\n * @copyright  2025 Sokunthearith Makara <sokunthearithmakara@gmail.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'core/modal_factory', 'core/modal_events'],\n    function($, modalFactory, modalEvents) {\n\n        var init = function() {\n            $('#ivplugin_checkupdate').off('click').on('click', async function(e) {\n                e.preventDefault();\n                const modal = await modalFactory.create({\n                    body: '<div class=\"spinner\"></div>',\n                    title: 'Available interaction types',\n                    show: false,\n                    removeOnClose: true,\n                    isVerticallyCentered: true,\n                });\n\n                let root = modal.getRoot();\n                root.attr('id', 'ivplugin_checkupdate_modal');\n\n                let plugins = $('#ivplugin_updateinfo').val();\n                plugins = JSON.parse(plugins);\n                let installed = $('#ivplugin_installed').val();\n                installed = JSON.parse(installed);\n                plugins = plugins.map((plugin) => {\n                    plugin.installed = installed.find((p) => p.component === plugin.component);\n                    return plugin;\n                });\n\n                // Sort by title.\n                plugins.sort((a, b) => {\n                    if (a.title < b.title) {\n                        return -1;\n                    }\n                    if (a.title > b.title) {\n                        return 1;\n                    }\n                    return 0;\n                });\n\n                let table = '<table class=\"table table-striped table-bordered\">';\n                table += '<tbody>';\n                plugins.forEach((plugin) => {\n                    table += '<tr>';\n                    const row = `<td>\n                <p class=\"iv-font-weight-bold mb-1 d-flex justify-content-between\"><span>${plugin.title}</span>\n                <span><a href=\"${plugin.description_url}\" class=\"iv-mr-2\" target=\"_blank\">\n                <i class=\"fa fa-circle-info\"></i></a>\n                <a href=\"${plugin.download_url}\" class=\"iv-mr-2\" target=\"_blank\">\n                <i class=\"fa fa-cloud-download\"></i></a>\n                </span></p>\n                <p>${plugin.description}</p>\n                <div class=\"d-flex justify-content-between\">\n                <div class=\"small iv-font-weight-bold\">\n                ${plugin.installed ? '<span class=\"text-success\">Installed</span>' : 'Not installed'}\n                </div>\n                <div>${plugin.type == 'free' ? 'Free' : 'Paid'}</div>\n                </div>\n                </td>`;\n                    table += row;\n                    table += '</tr>';\n                });\n                table += '</tbody></table>';\n                root.find('.modal-body').html(table);\n                modal.show();\n\n                root.off(modalEvents.hidden);\n                root.on(modalEvents.hidden, function() {\n                    modal.destroy();\n                });\n            });\n        };\n\n        return {init};\n    });"],"names":["define","$","modalFactory","modalEvents","init","off","on","async","e","preventDefault","modal","create","body","title","show","removeOnClose","isVerticallyCentered","root","getRoot","attr","plugins","val","JSON","parse","installed","map","plugin","find","p","component","sort","a","b","table","forEach","row","description_url","download_url","description","type","html","hidden","destroy"],"mappings":";;;;;;;AAuBAA,uCAAO,CAAC,SAAU,qBAAsB,sBACpC,SAASC,EAAGC,aAAcC,mBAqEf,CAACC,KAnEG,WACPH,EAAE,yBAAyBI,IAAI,SAASC,GAAG,SAASC,eAAeC,GAC/DA,EAAEC,uBACIC,YAAcR,aAAaS,OAAO,CACpCC,KAAM,8BACNC,MAAO,8BACPC,MAAM,EACNC,eAAe,EACfC,sBAAsB,QAGtBC,KAAOP,MAAMQ,UACjBD,KAAKE,KAAK,KAAM,kCAEZC,QAAUnB,EAAE,wBAAwBoB,MACxCD,QAAUE,KAAKC,MAAMH,aACjBI,UAAYvB,EAAE,uBAAuBoB,MACzCG,UAAYF,KAAKC,MAAMC,WACvBJ,QAAUA,QAAQK,KAAKC,SACnBA,OAAOF,UAAYA,UAAUG,MAAMC,GAAMA,EAAEC,YAAcH,OAAOG,YACzDH,UAIXN,QAAQU,MAAK,CAACC,EAAGC,IACTD,EAAElB,MAAQmB,EAAEnB,OACJ,EAERkB,EAAElB,MAAQmB,EAAEnB,MACL,EAEJ,QAGPoB,MAAQ,qDACZA,OAAS,UACTb,QAAQc,SAASR,SACbO,OAAS,aACHE,6GACiET,OAAOb,yDACjEa,OAAOU,+IAEbV,OAAOW,sKAGbX,OAAOY,oKAGVZ,OAAOF,UAAY,8CAAgD,0EAE/C,QAAfE,OAAOa,KAAiB,OAAS,gEAGpCN,OAASE,IACTF,OAAS,WAEbA,OAAS,mBACThB,KAAKU,KAAK,eAAea,KAAKP,OAC9BvB,MAAMI,OAENG,KAAKZ,IAAIF,YAAYsC,QACrBxB,KAAKX,GAAGH,YAAYsC,QAAQ,WACxB/B,MAAMgC"}