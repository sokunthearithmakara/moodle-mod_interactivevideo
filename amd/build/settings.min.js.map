{"version":3,"file":"settings.min.js","sources":["../src/settings.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Module for settings page.\n *\n * @module     mod_interactivevideo/settings\n * @copyright  2025 Sokunthearith Makara <sokunthearithmakara@gmail.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery'], function($) {\n    var init = function() {\n        $('#ivplugin_checkupdate').off('click').on('click', async function(e) {\n            e.preventDefault();\n            const modal = `<div class=\"modal fade\" id=\"ivplugin_checkupdate_modal\"\n             tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"ivplugin_checkupdate_modal\" aria-hidden=\"true\">\n                <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\" role=\"document\">\n                    <div class=\"modal-content\">\n                        <div class=\"modal-header\" style=\"border-bottom: 0;\">\n                            <h5 class=\"modal-title\" id=\"ivplugin_checkupdate_modal\">Available interaction types</h5>\n                        </div>\n                        <div class=\"modal-body\">\n                        </div>\n                    </div>\n                </div>\n            </div>`;\n            $('body').append(modal);\n            $('#ivplugin_checkupdate_modal').modal('show');\n            let plugins = $('#ivplugin_updateinfo').val();\n            plugins = JSON.parse(plugins);\n            let installed = $('#ivplugin_installed').val();\n            installed = JSON.parse(installed);\n            plugins = plugins.map((plugin) => {\n                plugin.installed = installed.find((p) => p.component === plugin.component);\n                return plugin;\n            });\n\n            // Sort by title.\n            plugins.sort((a, b) => {\n                if (a.title < b.title) {\n                    return -1;\n                }\n                if (a.title > b.title) {\n                    return 1;\n                }\n                return 0;\n            });\n\n            let table = '<table class=\"table table-striped table-bordered\">';\n            table += '<tbody>';\n            plugins.forEach((plugin) => {\n                table += '<tr>';\n                const row = `<td>\n                <p class=\"font-weight-bold mb-1 d-flex justify-content-between\"><span>${plugin.title}</span>\n                <span><a href=\"${plugin.description_url}\" class=\"mr-2\" target=\"_blank\">\n                <i class=\"fa fa-circle-info\"></i></a>\n                <a href=\"${plugin.download_url}\" class=\"mr-2\" target=\"_blank\">\n                <i class=\"fa fa-cloud-download\"></i></a>\n                </span></p>\n                <p>${plugin.description}</p>\n                <div class=\"d-flex justify-content-between\">\n                <div class=\"small font-weight-bold\">\n                ${plugin.installed ? '<span class=\"text-success\">Installed</span>' : 'Not installed'}\n                </div>\n                <div>${plugin.type == 'free' ? 'Free' : 'Paid'}</div>\n                </div>\n                </td>`;\n                table += row;\n                table += '</tr>';\n            });\n            table += '</tbody></table>';\n            $('#ivplugin_checkupdate_modal .modal-body').html(table);\n        });\n    };\n\n    return {\n        init: init\n    };\n});"],"names":["define","$","init","off","on","async","e","preventDefault","append","modal","plugins","val","JSON","parse","installed","map","plugin","find","p","component","sort","a","b","title","table","forEach","row","description_url","download_url","description","type","html"],"mappings":";;;;;;;AAuBAA,uCAAO,CAAC,WAAW,SAASC,SAiEjB,CACHC,KAjEO,WACPD,EAAE,yBAAyBE,IAAI,SAASC,GAAG,SAASC,eAAeC,GAC/DA,EAAEC,iBAaFN,EAAE,QAAQO,ssBACVP,EAAE,+BAA+BQ,MAAM,YACnCC,QAAUT,EAAE,wBAAwBU,MACxCD,QAAUE,KAAKC,MAAMH,aACjBI,UAAYb,EAAE,uBAAuBU,MACzCG,UAAYF,KAAKC,MAAMC,WACvBJ,QAAUA,QAAQK,KAAKC,SACnBA,OAAOF,UAAYA,UAAUG,MAAMC,GAAMA,EAAEC,YAAcH,OAAOG,YACzDH,UAIXN,QAAQU,MAAK,CAACC,EAAGC,IACTD,EAAEE,MAAQD,EAAEC,OACJ,EAERF,EAAEE,MAAQD,EAAEC,MACL,EAEJ,QAGPC,MAAQ,qDACZA,OAAS,UACTd,QAAQe,SAAST,SACbQ,OAAS,aACHE,0GACkEV,OAAOO,yDAC9DP,OAAOW,4IAEbX,OAAOY,mKAGbZ,OAAOa,iKAGVb,OAAOF,UAAY,8CAAgD,0EAE/C,QAAfE,OAAOc,KAAiB,OAAS,gEAGxCN,OAASE,IACTF,OAAS,WAEbA,OAAS,mBACTvB,EAAE,2CAA2C8B,KAAKP"}