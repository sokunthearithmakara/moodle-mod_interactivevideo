define("mod_interactivevideo/quickform",["exports","jquery","core/event_dispatcher"],(function(_exports,_jquery,_event_dispatcher){var obj;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_jquery=(obj=_jquery)&&obj.__esModule?obj:{default:obj};var _systemImportTransformerGlobalIdentifier="undefined"!=typeof window?window:"undefined"!=typeof self?self:"undefined"!=typeof global?global:{};var _default=async()=>{let ModalForm,str;(0,_jquery.default)(document).on("click",".iv_quickform",(async function(e){let data={contextid:(0,_jquery.default)(this).data("contextid"),cmid:(0,_jquery.default)(this).data("cmid"),courseid:(0,_jquery.default)(this).data("courseid"),interaction:(0,_jquery.default)(this).data("interaction"),origin:(0,_jquery.default)(this).data("origin")};if(e.preventDefault(),!e.ctrlKey&&!e.metaKey)return void(window.location.href=(0,_jquery.default)(this).data("href"));ModalForm||(ModalForm=await("function"==typeof _systemImportTransformerGlobalIdentifier.define&&_systemImportTransformerGlobalIdentifier.define.amd?new Promise((function(resolve,reject){_systemImportTransformerGlobalIdentifier.require(["core_form/modalform"],resolve,reject)})):"undefined"!=typeof module&&module.exports&&"undefined"!=typeof require||"undefined"!=typeof module&&module.component&&_systemImportTransformerGlobalIdentifier.require&&"component"===_systemImportTransformerGlobalIdentifier.require.loader?Promise.resolve(require("core_form/modalform")):Promise.resolve(_systemImportTransformerGlobalIdentifier["core_form/modalform"]))),str||(str=await("function"==typeof _systemImportTransformerGlobalIdentifier.define&&_systemImportTransformerGlobalIdentifier.define.amd?new Promise((function(resolve,reject){_systemImportTransformerGlobalIdentifier.require(["core/str"],resolve,reject)})):"undefined"!=typeof module&&module.exports&&"undefined"!=typeof require||"undefined"!=typeof module&&module.component&&_systemImportTransformerGlobalIdentifier.require&&"component"===_systemImportTransformerGlobalIdentifier.require.loader?Promise.resolve(require("core/str")):Promise.resolve(_systemImportTransformerGlobalIdentifier["core/str"])));let DynamicForm,form=new ModalForm({formClass:"mod_interactivevideo\\form\\quicksettings_form",args:data,modalConfig:{title:await str.get_string("quicksettings","mod_interactivevideo"),removeOnClose:!0}});form.show(),form.addEventListener(form.events.LOADED,(e=>{e.stopImmediatePropagation(),window.IVPLAYER&&window.IVPLAYER.pause(),setTimeout((()=>{(0,_jquery.default)(".modal-dialog").removeClass("modal-lg").addClass("modal-xl")}),1e3),setTimeout((async()=>{let strings=await str.get_strings([{key:"moresettings",component:"mod_interactivevideo"},{key:"resettodefaults",component:"mod_interactivevideo"}]);(0,_jquery.default)('[data-region="footer"]').css("align-items","unset").prepend('<span class="btn btn-secondary mr-1 default" title="'.concat(strings[1],'"><i class="fa fa-refresh"></i>\n                        </span>\n                        <a type="button" class="btn btn-secondary mr-auto" data-dismiss="modal" title="').concat(strings[0],'"\n                 href="').concat(M.cfg.wwwroot,"/course/modedit.php?update=").concat(data.cmid,'"><i class="fa fa-cog"></i>\n                 </a>'))}),2e3)})),form.addEventListener(form.events.FORM_SUBMITTED,(e=>{e.stopImmediatePropagation(),data.detail=e.detail,"navbar"===data.origin?((0,_jquery.default)("#background-loading").show(),window.location.reload()):(0,_event_dispatcher.dispatchEvent)("quickformsubmitted",data)})),(0,_jquery.default)(document).off("click",".default").on("click",".default",(async function(e){e.preventDefault(),data.action="reset",DynamicForm||(DynamicForm=await("function"==typeof _systemImportTransformerGlobalIdentifier.define&&_systemImportTransformerGlobalIdentifier.define.amd?new Promise((function(resolve,reject){_systemImportTransformerGlobalIdentifier.require(["core_form/dynamicform"],resolve,reject)})):"undefined"!=typeof module&&module.exports&&"undefined"!=typeof require||"undefined"!=typeof module&&module.component&&_systemImportTransformerGlobalIdentifier.require&&"component"===_systemImportTransformerGlobalIdentifier.require.loader?Promise.resolve(require("core_form/dynamicform")):Promise.resolve(_systemImportTransformerGlobalIdentifier["core_form/dynamicform"]))),new DynamicForm(document.querySelector('[data-region="body"]'),"mod_interactivevideo\\form\\quicksettings_form").load(data)}))}))};return _exports.default=_default,_exports.default}));

//# sourceMappingURL=quickform.min.js.map