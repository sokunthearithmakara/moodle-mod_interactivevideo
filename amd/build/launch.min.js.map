{"version":3,"file":"launch.min.js","sources":["../src/launch.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Launch the interactive video in modal on course page\n *\n * @module     mod_interactivevideo/launch\n * @copyright  2024 Sokunthearith Makara <sokunthearithmakara@gmail.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'core/str'], function($, str) {\n    return {\n        init: async function() {\n            let strings = await str.get_strings([\n                {key: 'close', component: 'mod_interactivevideo'},\n                {key: 'lock', component: 'mod_interactivevideo'},\n                {key: 'unlock', component: 'mod_interactivevideo'},\n                {key: 'openinnewtab', component: 'mod_interactivevideo'},\n                {key: 'togglecontrols', component: 'mod_interactivevideo'},\n            ]);\n            // Launch the interactive video in modal\n            $(document).on('click', '.launch-interactivevideo', function(e) {\n                // Save the current document title.\n                let title = document.title;\n                // Get showcontrols from cache.\n                let showcontrols = localStorage.getItem('showcontrols') ? true : false;\n                e.preventDefault();\n                const id = $(this).data('id');\n                const instance = $(this).data('instance');\n                const course = $(this).data('course');\n                const contextid = $(this).data('contextid');\n                const $card = $(this).closest('#interactivevideo-' + instance);\n                $card.find('.image-container').addClass('hovered');\n                const modal = `<div class=\"modal fade p-0 modal-fullscreen rounded-0\" id=\"playermodal\"\n                data-backdrop=\"static\" data-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"playermodalLabel\"\n                aria-hidden=\"true\">\n                   <div class=\"rounded-0 modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl position-relative\">\n                    <div class=\"position-fixed w-100 h-100 no-pointer bg-transparent z-index-1\" id=\"background-loading\">\n                        <div class=\"d-flex h-100 align-items-center justify-content-center\">\n                            <div class=\"spinner-border text-danger\" style=\"width: 3rem; height: 3rem;\" role=\"status\">\n                                <span class=\"sr-only\">Loading...</span>\n                            </div>\n                        </div>\n                    </div>\n                       <div class=\"modal-content ${showcontrols ? 'show-control' : ''} rounded-0 border-0\">\n                       <div class=\"modal-header border-0 text-white align-items-center py-0 h-0\n                        position-absolute w-100 z-index-1 rounded-0\">\n                         <div class=\"modal-background w-100 position-absolute\"></div>\n                               <span class=\"modal-title position-relative z-index-1 d-flex align-items-center overflow-hidden\"\n                                id=\"playermodalLabel\">\n                                <span class=\"h5 mb-0\">\n                                    <button type=\"button\" class=\"btn border-0 m-1 p-1 h5 bg-transparent\" data-dismiss=\"modal\"\n                                     aria-label=\"Close\" title=\"${strings[0]}\">\n                                        <i class=\"fa fa-arrow-left text-white m-0 fa-2x\" aria-hidden=\"true\"></i>\n                                    </button>\n                                </span>\n\n                                <div class=\"d-sm-none d-block small ml-2\" data-region=\"activity-completion\">\n                                </div>\n                               </span>\n\n                               <div class=\"modal-action d-flex align-items-center position-relative z-index-1\">\n                               <div class=\"d-none d-sm-block small\" data-region=\"activity-completion\">\n                               </div>\n                               <span type=\"button\" class=\"btn ml-2 border-0 h5 mb-0 lock-bar\"\n                                title=\"${strings[1]}\"\n                                data-href=\"${M.cfg.wwwroot}/mod/interactivevideo/view.php?id=${id}\">\n                               <i class=\"fa fa-unlock text-white m-0 fa-xl\" aria-hidden=\"true\"></i></span>\n                               <span type=\"button\" class=\"btn ml-2 border-0 h5 mb-0 open-external-link\"\n                                title=\"${strings[3]}\"\n                                data-href=\"${M.cfg.wwwroot}/mod/interactivevideo/view.php?id=${id}\">\n                               <i class=\"fa fa-external-link text-white m-0 fa-xl\" aria-hidden=\"true\"></i></span>\n                               </div>\n                           </div>\n                           <div class=\"modal-body p-0 position-relative overflow-hidden \">\n                           <iframe id=\"ivplayer\" src=\"${M.cfg.wwwroot}/mod/interactivevideo/view.php?id=${id}&embed=1\" frameborder=0\n                           class=\"w-100 position-absolute h-100\" allow=\"autoplay\"></iframe>\n                                <button type=\"button\" class=\"btn border-0 m-1 p-1 h5 toggle-controls d-none\"\n                                 title=\"${strings[4]}\">\n                                   <i class=\"fa fa-chevron-up text-white m-0 fa-2x\" aria-hidden=\"true\"></i>\n                                </button></span>\n                           </div>\n                       </div>\n                   </div>\n               </div>`;\n                $('#playermodal').remove(); // Important:: Remove the previous modal ONLY after the new one is created.\n                $('body').append(modal);\n                $('#playermodal').modal('show');\n\n                const headerFunction = function() {\n                    let $header = $('#playermodal .modal-header');\n                    if ($header.hasClass('show')) {\n                        return;\n                    }\n\n                    $header.addClass('show');\n                    $header.fadeIn();\n                    if (!$('#playermodal').hasClass('locked')) {\n                        setTimeout(function() {\n                            $header.removeClass('show');\n                            $header.fadeOut();\n                        }, 5000);\n                    }\n                };\n\n                let iframeDoc, iframeAnnos, details, player;\n                $('#playermodal').on('shown.bs.modal', function() {\n                    $('body').addClass('overflow-hidden');\n                    $(this).find('.modal-header').addClass('show');\n                    if (localStorage.getItem('lock-bar')) {\n                        $(this).find('.lock-bar').trigger('click');\n                    }\n                    // Copy the activity information to the modal header.\n                    let $completion = $card.find('[data-region=activity-information]');\n                    $completion = $completion.clone();\n                    $(this).find('[data-region=\"activity-completion\"]').html($completion);\n                    // Listen the player timeupdate event in the iframe.\n                    let checkIframeDoc = function() {\n                        try {\n                            iframeDoc = document.getElementById('ivplayer').contentDocument;\n                        } catch (e) {\n                            cancelAnimationFrame(checkIframeDoc);\n                            return;\n                        }\n                        iframeAnnos = document.getElementById('ivplayer').contentWindow.IVANNO;\n                        if (!iframeDoc.getElementById('player')) {\n                            requestAnimationFrame(checkIframeDoc);\n                            return;\n                        }\n                        // Hide the background-loading.\n                        $('#background-loading').hide(0);\n                        if (!iframeAnnos) {\n                            requestAnimationFrame(checkIframeDoc);\n                            return;\n                        }\n\n                        player = document.getElementById('ivplayer').contentWindow.IVPLAYER;\n\n                        if (iframeDoc.getElementById('player')) {\n                            $('#playermodal .modal-header').removeClass('show');\n                            $('#playermodal .toggle-controls').removeClass('d-none');\n\n                            if (!showcontrols) {\n                                setTimeout(function() {\n                                    $('#playermodal .modal-content').removeClass('show-control');\n                                }, 1000);\n                            }\n\n                            $('#playermodal .toggle-controls').on('click', function() {\n                                $('#playermodal .modal-content').toggleClass('show-control');\n                                showcontrols = $('#playermodal .modal-content').hasClass('show-control');\n                                if (showcontrols) {\n                                    localStorage.setItem('showcontrols', '1');\n                                } else {\n                                    localStorage.removeItem('showcontrols');\n                                }\n                            });\n\n                            iframeDoc.addEventListener('annotationitemsrendered', function(e) {\n                                details = e.detail;\n                            });\n\n                            $(iframeDoc).on('mousemove', '#video-wrapper', function() {\n                                if ($('#playermodal').hasClass('locked')) {\n                                    return;\n                                }\n                                let $message = iframeDoc.querySelector('#message:not(.sticky)');\n                                let $activestart = iframeDoc.querySelector('#start-screen:not(.d-none) .hasintro');\n                                if ($message || $activestart) {\n                                    $('#playermodal .modal-header').removeClass('show');\n                                } else {\n                                    headerFunction();\n                                }\n                            });\n\n                            iframeDoc.addEventListener('videoPaused', function() {\n                                if ($('#playermodal').hasClass('locked')) {\n                                    return;\n                                }\n                                let $message = iframeDoc.querySelector('#message:not(.sticky)');\n                                let $activestart = iframeDoc.querySelector('#start-screen:not(.d-none) .hasintro');\n                                if ($message || $activestart) {\n                                    $('#playermodal .modal-header').removeClass('show');\n                                } else {\n                                    headerFunction();\n                                }\n                                $('#playermodal .toggle-controls').fadeOut(300);\n                            });\n\n                            iframeDoc.addEventListener('iv:playerPlaying', function() {\n                                $('#playermodal .toggle-controls').fadeIn(300);\n                            });\n\n                            // Analytics progress bar.\n                            let $progressbar = $card.find('.analytics.progress .progress-bar');\n                            if ($progressbar.length == 0) {\n                                return;\n                            }\n                            let current = $progressbar.data('current');\n                            iframeDoc.addEventListener('analyticsupdated', function(e) {\n                                let percentage = e.detail.percentage;\n                                if (percentage > current) {\n                                    $progressbar.css('width', percentage + '%')\n                                        .data('current', percentage);\n                                    $card.find('.analytics-percentage').text(Math.round(percentage));\n                                }\n                            });\n                        } else {\n                            requestAnimationFrame(checkIframeDoc);\n                        }\n                    };\n                    requestAnimationFrame(checkIframeDoc);\n\n                    $(this).off('hidden.bs.modal').on('hidden.bs.modal', function() {\n                        cancelAnimationFrame(checkIframeDoc);\n                    });\n\n                    $(document).off('click', '#playermodal [data-action=\"toggle-manual-completion\"]')\n                        .on('click', '#playermodal [data-action=\"toggle-manual-completion\"]', function() {\n                            $(this).parent().addClass('updated');\n                            if ($(this).data('withavailability') == 1) {\n                                history.pushState(null, null, M.cfg.wwwroot + '/course/view.php?id=' + course + '#module-' + id);\n                            }\n                        });\n\n                    // Update the browser url to the current activity.\n                    history.pushState(null, null, M.cfg.wwwroot + '/mod/interactivevideo/view.php?id=' + id);\n                    // Update the title of tab to the activity name.\n                    let activitytitle = $card.data('title');\n                    document.title = activitytitle;\n                });\n\n                $('#playermodal').on('hide.bs.modal', async function() {\n                    $('body').removeClass('overflow-hidden');\n                    // Trigger hover on .image-container for 2 seconds.\n                    setTimeout(function() {\n                        $card.find('.image-container').removeClass('hovered');\n                    }, 1000);\n\n                    if (player) { // Must check this in case user close modal before the player is ready.\n                        await player.pause();\n                    } else {\n                        $(this).remove();\n                        return;\n                    }\n                    // If there is automatic completion conditions, we have to update it.\n                    let $autocompletion = $card.find('.automatic-completion-conditions');\n                    if ($autocompletion.length > 0) {\n                        const completion = await $.ajax({\n                            url: M.cfg.wwwroot + '/mod/interactivevideo/ajax.php',\n                            method: 'POST',\n                            dataType: 'text',\n                            data: {\n                                action: 'get_cm_completion',\n                                cmid: id,\n                                sesskey: M.cfg.sesskey,\n                                contextid: contextid,\n                                courseid: course,\n                                userid: M.cfg.userId || 0,\n                            }\n                        });\n\n                        if (completion) {\n                            const completiondata = JSON.parse(completion);\n                            $card.find('[data-region=activity-information]')\n                                .html($(completiondata.completion).html());\n                        }\n                    }\n\n                    // If there is manual completion, we have to copy the button to the course page.\n                    let $manualcompletion = $(this).find('.completion-info.updated');\n                    if ($manualcompletion.length > 0) {\n                        $card.find('.completion-info').html($manualcompletion.html());\n                    }\n\n                    if (details) {\n                        let progressbar = $card.find('.tasks .progress-bar');\n                        if (progressbar.length > 0) {\n                            progressbar.css('width', Math.round(details.completed / details.total * 100) + '%');\n                            if (details.completed == details.total) {\n                                progressbar.addClass('bg-success').removeClass('bg-primary');\n                            } else {\n                                progressbar.removeClass('bg-success').addClass('bg-primary');\n                            }\n                            $card.find('.percentage')\n                                .text(Math.round(details.completed / details.total * 100));\n                            $card.find('.items').text(`(${details.completed}/${details.total})`);\n                            $card.find('.xp').text(details.xp);\n                        }\n                    }\n\n                    // Update the browser url to the current course.\n                    history.pushState(null, null, M.cfg.wwwroot + '/course/view.php?id=' + course);\n                    document.title = title;\n\n                    if (iframeAnnos) {\n                        // Remove the new-bagde from the poster.\n                        $card.find('.new-badge').remove();\n                    }\n\n                    $card.closest('.modtype_interactivevideo')[0]\n                        .scrollIntoView({behavior: \"smooth\", block: \"center\", inline: \"center\"});\n\n                    if (iframeDoc) {\n                       $(iframeDoc).off();\n                    }\n                });\n\n                // Close modal when the browser back button is clicked.\n                window.onpopstate = function(e) {\n                    if (e.target.location.pathname == '/course/view.php') {\n                        $('#playermodal').modal('hide');\n                    }\n                };\n\n                $(document).off('click', '.lock-bar').on('click', '.lock-bar', function(e) {\n                    e.preventDefault();\n                    $(this).toggleClass('locked');\n                    $('#playermodal').toggleClass('locked');\n                    if ($(this).hasClass('locked')) {\n                        $(this).attr('title', strings[2]);\n                        $(this).find('i').removeClass('fa-unlock').addClass('fa-lock');\n                        $('#playermodal .modal-header').addClass('show');\n                        // Save to local storage.\n                        localStorage.setItem('lock-bar', '1');\n                        headerFunction();\n                    } else {\n                        $(this).attr('title', strings[1]);\n                        $(this).find('i').removeClass('fa-lock').addClass('fa-unlock');\n                        // Remove from local storage.\n                        localStorage.removeItem('lock-bar');\n                        setTimeout(function() {\n                            $('#playermodal .modal-header').removeClass('show');\n                        }, 5000);\n                    }\n\n                });\n            });\n\n            $(document).on('click', '.open-external-link', function() {\n                $('#playermodal').modal('hide');\n                window.open($(this).data('href'), '_blank');\n            });\n\n\n            $(document).on('click', '.interactivevideo-card .description-show',\n                function() {\n                    const $description = $(this).closest('.top-section').find('.description');\n                    $description.slideToggle('fast', 'swing');\n                    $(this).toggleClass('rotate');\n                });\n\n            // Get the #hash from the url and scroll to the element and hover it.\n            $(document).ready(function() {\n                let hash = window.location.hash;\n                if (hash) {\n                    let $element = $(hash);\n                    if ($element.length > 0 && $element.hasClass('modtype_interactivevideo')) {\n                        $element.addClass('highlighted');\n                        setTimeout(() => {\n                            $element[0].scrollIntoView({behavior: \"smooth\", block: \"center\", inline: \"center\"});\n                            setTimeout(function() {\n                                $element.removeClass('highlighted');\n                            }, 3000);\n                        }, 1000);\n                    }\n                }\n            });\n        },\n    };\n});"],"names":["define","$","str","init","async","strings","get_strings","key","component","document","on","e","title","showcontrols","localStorage","getItem","preventDefault","id","this","data","instance","course","contextid","$card","closest","find","addClass","modal","M","cfg","wwwroot","remove","append","headerFunction","$header","hasClass","fadeIn","setTimeout","removeClass","fadeOut","iframeDoc","iframeAnnos","details","player","trigger","$completion","clone","html","checkIframeDoc","getElementById","contentDocument","cancelAnimationFrame","contentWindow","IVANNO","hide","IVPLAYER","toggleClass","setItem","removeItem","addEventListener","detail","$message","querySelector","$activestart","$progressbar","length","current","percentage","css","text","Math","round","requestAnimationFrame","off","parent","history","pushState","activitytitle","pause","completion","ajax","url","method","dataType","action","cmid","sesskey","courseid","userid","userId","completiondata","JSON","parse","$manualcompletion","progressbar","completed","total","xp","scrollIntoView","behavior","block","inline","window","onpopstate","target","location","pathname","attr","open","slideToggle","ready","hash","$element"],"mappings":"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"}