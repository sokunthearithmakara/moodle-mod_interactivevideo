{"version":3,"file":"main.min.js","sources":["../src/main.js"],"sourcesContent":["/* eslint-disable max-depth */\n// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Interactive video chapter type script\n *\n * @module     ivplugin_chapter/main\n * @copyright  2024 Sokunthearith Makara <sokunthearithmakara@gmail.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\nimport $ from 'jquery';\nimport Base from 'mod_interactivevideo/type/base';\nimport {get_string as getString} from 'core/str';\n\nexport default class Chapter extends Base {\n    /**\n     * Initialize the interaction type\n     * @returns {void}\n     */\n    async init() {\n        if (this.isEditMode()) {\n            return;\n        }\n        let self = this;\n        let chapters = this.annotations.filter((annotation) => annotation.type == 'chapter');\n\n        $(\"#chaptertoggle\").removeClass('d-none');\n        // Order the chapters by timestamp.\n        chapters.sort((a, b) => a.timestamp - b.timestamp);\n        // If the first chapter doesn't start at the beginning, add a chapter at the beginning.\n        if (chapters[0].timestamp > this.start) {\n            chapters.unshift({\n                id: 0,\n                title: await getString('startchapter', 'ivplugin_chapter'),\n                formattedtitle: await getString('startchapter', 'ivplugin_chapter'),\n                timestamp: this.start\n            });\n        }\n        // Calculate start and end time of each chapter.\n        chapters.forEach((chapter, index) => {\n            chapter.start = chapter.timestamp;\n            if (index < chapters.length - 1) {\n                chapter.end = chapters[index + 1].timestamp;\n            } else {\n                chapter.end = this.end;\n            }\n        });\n\n        const convertSecondsToHMS = (seconds) => {\n            const h = Math.floor(seconds / 3600);\n            const m = Math.floor(seconds % 3600 / 60);\n            const s = Math.floor(seconds % 3600 % 60);\n            return (h > 0 ? h + ':' : '') + (m < 10 ? '0' : '') + m + ':' + (s < 10 ? '0' : '') + s;\n        };\n\n        // Render the chapters.\n        const $chapterlists = $('[data-region=chapterlists]');\n        $chapterlists.empty();\n        chapters.forEach((chapter) => {\n            $chapterlists.append(`<li class=\"p-0 flex-column border-${self.isBS5 ? 'start' : 'left'}-0\n                 border-${self.isBS5 ? 'end' : 'start'}-0 chapter\n            list-group-item bg-transparent d-flex justify-content-between align-items-center cursor-pointer\"\n            data-id=\"${chapter.id}\" data-start=\"${chapter.start}\" data-end=\"${chapter.end}\">\n            <div class=\"w-100 d-flex align-items-center justify-content-between p-2\">\n            <span class=\"flex-grow-1 text-truncate iv-font-weight-bold\"><i class=\"bi bi-chevron-down iv-mr-2 toggle\"></i>\n            <span class=\"chapter-title\">${chapter.formattedtitle}</span></span><span class=\"small iv-badge-primary iv-badge-pill\">\n            ${convertSecondsToHMS(chapter.start - this.start)}</span></div>\n            <ul class=\"annolistinchapter w-100 p-0\"></ul></li>`);\n        });\n\n        $(document).off('timeupdate.chapter').on('timeupdate.chapter', async function(e) {\n            if (!self.main) { // Record main video progress only.\n                return;\n            }\n            const currenttime = e.originalEvent.detail.time;\n            const currentchapter = chapters.find((chapter) => currenttime >= chapter.start && currenttime < chapter.end);\n            if (!currentchapter) {\n                return;\n            }\n            if (currentchapter) {\n                const settings = JSON.parse(currentchapter.advanced || '{}');\n                let locked = false;\n                if (!self.isEditMode() && !self.isPreviewMode() && !$('body').hasClass('editorview')) {\n                    if (settings.lock && settings.lock != '') {\n                        if (settings.lock == 'untilprevious') {\n                            let previousIndex = chapters.findIndex((chapter) => chapter.id == currentchapter.id) - 1;\n                            if (previousIndex < 0) {\n                                locked = false;\n                            } else {\n                                let previouschapter = chapters[previousIndex];\n                                // Check if the annotations in the previous chapter are completed.\n                                let previouschapterannotations = self.annotations.filter((annotation) => {\n                                    return annotation.timestamp >= previouschapter.start\n                                        && annotation.timestamp < previouschapter.end && annotation.hascompletion == '1';\n                                });\n                                let completed = previouschapterannotations.every((annotation) => {\n                                    return annotation.completed;\n                                });\n                                if (completed) {\n                                    locked = false;\n                                } else {\n                                    locked = true;\n                                }\n                            }\n                        } else if (settings.lock == 'untilallprevious') {\n                            let previousAnnotations = self.annotations.filter((annotation) => {\n                                return annotation.timestamp < currentchapter.start && annotation.hascompletion == '1';\n                            });\n                            let completed = previousAnnotations.every((annotation) => {\n                                return annotation.completed;\n                            });\n                            if (completed) {\n                                locked = false;\n                            } else {\n                                locked = true;\n                            }\n                        } else if (settings.lock == 'untilcomplete') {\n                            if (self.options.isCompleted == false) {\n                                locked = true;\n                            }\n                        }\n                    }\n                }\n\n                if (locked) {\n                    let lockstring = await getString(settings.lock, 'ivplugin_chapter');\n                    self.addNotification(await getString('chapterlocked', 'ivplugin_chapter', lockstring), 'danger');\n                    $('body').addClass('chapter-locked');\n                    // Go to the next chapter.\n                    self.player.pause();\n                    self.player.seek(currentchapter.start - 0.3);\n                    // Show the message.\n                }\n\n                $chapterlists.find('.chapter').removeClass('active-chapter');\n                $chapterlists.find(`.chapter[data-id=${currentchapter.id}]`).addClass('active-chapter');\n                if (currentchapter.id != 0) {\n                    $('#controller #chaptertitle').html(locked ? '<i class=\"fa fa-lock mx-2\"></i>' : currentchapter.formattedtitle);\n                } else {\n                    $('#controller #chaptertitle').text('');\n                }\n            }\n        });\n\n        // Hide or show annotations in the chapter if the chapter is locked.\n        if (!self.isEditMode() && !self.isPreviewMode() && !$('body').hasClass('editorview')) {\n            $(document).on('chapterrendered', (e) => {\n                let annotations = e.originalEvent.detail.annotations;\n                // If the first chapter doesn't start at the beginning, add a chapter at the beginning.\n                chapters.forEach(async(chapter) => {\n                    let settings = JSON.parse(chapter.advanced || '{}');\n                    let locked = false;\n                    if (settings.lock && settings.lock != '') {\n                        if (settings.lock == 'untilprevious') {\n                            let previousIndex = chapters.findIndex((c) => c.id == chapter.id) - 1;\n                            if (previousIndex < 0) {\n                                locked = false;\n                            } else {\n                                let previouschapter = chapters[previousIndex];\n                                // Check if the annotations in the previous chapter are completed.\n                                let previouschapterannotations = annotations.filter((annotation) => {\n                                    return annotation.timestamp >= previouschapter.start\n                                        && annotation.timestamp < previouschapter.end && annotation.hascompletion == '1';\n                                });\n                                let completed = previouschapterannotations.every((annotation) => {\n                                    return annotation.completed;\n                                });\n                                if (completed) {\n                                    locked = false;\n                                } else {\n                                    locked = true;\n                                }\n                            }\n                        } else if (settings.lock == 'untilallprevious') {\n                            let previousAnnotations = annotations.filter((annotation) => {\n                                return annotation.timestamp < chapter.start && annotation.hascompletion == '1';\n                            });\n                            let completed = previousAnnotations.every((annotation) => {\n                                return annotation.completed;\n                            });\n                            if (completed) {\n                                locked = false;\n                            } else {\n                                locked = true;\n                            }\n                        } else if (settings.lock == 'untilcomplete') {\n                            if (self.options.isCompleted == false) {\n                                locked = true;\n                            }\n                        }\n                    }\n                    if (locked) {\n                        $chapterlists.find(`.chapter[data-id=${chapter.id}]`).addClass('locked');\n                        $chapterlists.find(`.chapter[data-id=${chapter.id}] .annolistinchapter`).hide();\n                        $(`#video-nav ul li[data-id=${chapter.id}]`).html(`<div class=\"item locked\"\n                             data${self.isBS5 ? '-bs' : ''}-toggle=\"tooltip\"\n                    data${self.isBS5 ? '-bs' : ''}-container=\"#wrapper\"\n                    data${self.isBS5 ? '-bs' : ''}-trigger=\"hover\"\n                    data${self.isBS5 ? '-bs' : ''}-html=\"true\"\n                    data${self.isBS5 ? '-bs' : ''}-title='<i class=\"fa fa-lock iv-mr-1\"></i>\n                    ${await getString(settings.lock, 'ivplugin_chapter')}'>\n                        <i class=\"fa fa-lock\"></i></div>`);\n                        // Remove the annos within the chapter.\n                        const annotationsInChapter = annotations.filter((annotation) => {\n                            return annotation.timestamp >= chapter.start && annotation.timestamp < chapter.end;\n                        });\n                        annotationsInChapter.forEach((annotation) => {\n                            $(`#interactions-nav li[data-id=${annotation.id}]`).remove();\n                        });\n                    } else {\n                        $chapterlists.find(`.chapter[data-id=${chapter.id}]`).removeClass('locked');\n                        $chapterlists.find(`.chapter[data-id=${chapter.id}] .annolistinchapter`).show();\n                        $(`#video-nav ul li[data-id=${chapter.id}] .item i`).remove();\n                    }\n                });\n            });\n        }\n\n        $chapterlists.on('click', '.chapter .chapter-title', function(e) {\n            e.preventDefault();\n            // Hide the start, end screen.\n            $('#start-screen').fadeOut(300);\n            $('#end-screen').fadeOut(300);\n\n            let starttime = $(this).closest('li').data('start');\n            self.player.seek(starttime);\n\n            self.player.play();\n            // If the .chapter is in the left container, hide it.\n            if ($(this).closest('#chapter-container-left').length > 0) {\n                $('#chaptertoggle .btn').trigger('click');\n            }\n        });\n\n        // Chapter toggle.\n        $(document).on('click', '#chaptertoggle .btn', function(e) {\n            e.preventDefault();\n            $('#interactivevideo-container').toggleClass('chapter-open');\n            $(this).find('i').toggleClass('bi-collection bi-collection-fill');\n        });\n\n        $(document).on('click', '#closechapter', function(e) {\n            e.preventDefault();\n            $('#chaptertoggle .btn').trigger('click');\n        });\n\n        // Collapse/Expand the chapters on click of the chevron.\n        $(document).on('click', '.chapter i.toggle.bi', function(e) {\n            e.preventDefault();\n            $(this).closest('.chapter').find('.annolistinchapter').slideToggle(300);\n            $(this).toggleClass('bi-chevron-down bi-chevron-right');\n        });\n    }\n\n    /**\n     * Renders the edit item for the annotations list.\n     *\n     * @param {Array} annotations - The list of annotations.\n     * @param {jQuery} listItem - The jQuery object representing the list item.\n     * @param {Object} item - The item to be rendered.\n     * @param {number} item.timestamp - The timestamp of the item.\n     * @returns {jQuery} The modified list item.\n     */\n    renderEditItem(annotations, listItem, item) {\n        listItem = super.renderEditItem(annotations, listItem, item);\n        listItem.find('.type-name').addClass('justify-content-center');\n        listItem.find('.type-icon i').remove();\n        if (Number(item.timestamp) > this.end || Number(item.timestamp) < this.start || this.isSkipped(item.timestamp)) {\n            listItem.find('.title').addClass('text-muted');\n        }\n        let lock = JSON.parse(item.advanced).lock;\n        if (JSON.parse(item.advanced).lock && JSON.parse(item.advanced).lock != '') {\n            listItem.find('.type-name')\n                .before(`<i class=\"fa fa-lock iv-ml-2\" title=\"${M.util.get_string(lock, 'ivplugin_chapter')}\"></i>`);\n        }\n        return listItem;\n    }\n\n    /**\n     * Render the annotation on the video navigation\n     * @param {object} annotation The annotation object\n     * @returns {void}\n     */\n    renderItemOnVideoNavigation(annotation) {\n        let self = this;\n        if (annotation.hide) {\n            return;\n        }\n        if (annotation.timestamp < this.start || annotation.timestamp > this.end) {\n            return;\n        }\n        this.totaltime = this.totaltime || this.end - this.start;\n        const percentage = ((Number(annotation.timestamp) - this.start) / this.totaltime) * 100;\n        if (this.isVisible(annotation)) {\n            let classes = annotation.type + ' annotation li-draggable ';\n            if (annotation.completed) {\n                classes += 'completed ';\n            }\n            if (!this.isClickable(annotation)) {\n                classes += 'no-pointer-events ';\n            }\n            if (this.isSkipped(annotation.timestamp)) {\n                classes += 'skipped ';\n            }\n            let container = self.isEditMode() ? '#timeline' : '#wrapper';\n            let placement = 'top';\n            let title = annotation.formattedtitle;\n            title = title.replace(/'/g, '&apos;')\n                .replace(/\"/g, '&quot;')\n                .replace(/</g, '&lt;')\n                .replace(/>/g, '&gt;')\n                .replace(/&/g, '&amp;');\n            $(\"#video-nav ul\").append(`<li class=\"${classes}\" data-timestamp=\"${annotation.timestamp}\"\n              data-id=\"${annotation.id}\" style=\"left: calc(${percentage}% - 5px)\">\n        <div class=\"item\" data${self.isBS5 ? '-bs' : ''}-toggle=\"tooltip\" data${self.isBS5 ? '-bs' : ''}-container=\"${container}\"\n        data${self.isBS5 ? '-bs' : ''}-trigger=\"hover\" data${self.isBS5 ? '-bs' : ''}-html=\"true\"\n        data${self.isBS5 ? '-bs' : ''}-placement=\"${placement}\"\n        title='<i class=\"${this.prop.icon} iv-mr-1\"></i>${title}'></div></li>`);\n        }\n    }\n\n    /**\n     * Run the interaction\n     * @param {object} annotation The annotation object\n     */\n    async runInteraction(annotation) {\n        if (!this.main) {\n            return;\n        }\n        if ($('body').hasClass('chapter-locked')) {\n            await this.player.pause();\n            this.player.seek(annotation.timestamp - 0.3);\n            return;\n        }\n        if (annotation.char1 != '1') {\n            this.player.play();\n            // Show the tooltip for 2 seconds.\n            $('#video-nav ul li[data-id=' + annotation.id + '] .item').tooltip('show');\n            setTimeout(() => {\n                $('#video-nav ul li[data-id=' + annotation.id + '] .item').tooltip('hide');\n            }, 2000);\n            return;\n        }\n\n        await this.player.pause();\n        $('#controler').addClass('no-pointer-events');\n        $('#video-wrapper').append(`<h2 id=\"message\" style=\"z-index:105\" class=\"chapter position-absolute w-100 py-4\n        px-3 m-0 justify-content-start no-pointer\"><span class=\"text-truncate\">${annotation.formattedtitle}</span></h2>`);\n        // Add a progress bar and load it for 3 seconds.\n        $('#video-wrapper #message').append(`<div id=\"chapterprogress\" class=\"position-absolute w-100\">\n        <div class=\"progress-bar\"></div></div>`);\n        $('#message span').animate({\n            'top': '1em',\n        }, 300, 'swing');\n        $('#chapterprogress .progress-bar').animate({'width': '100%'}, 3000, 'linear', () => {\n            $('h2#message').remove();\n            if (!this.isEditMode()) {\n                $('#message span').css('top', '0');\n                //  This.player.play();\n                if (!$('body').hasClass('chapter-locked')) {\n                   this.player.play();\n                }\n                $('#controler').removeClass('no-pointer-events');\n            }\n        });\n    }\n}"],"names":["Chapter","Base","this","isEditMode","self","chapters","annotations","filter","annotation","type","removeClass","sort","a","b","timestamp","start","unshift","id","title","formattedtitle","forEach","chapter","index","length","end","$chapterlists","empty","append","isBS5","seconds","h","Math","floor","m","s","convertSecondsToHMS","document","off","on","async","e","main","currenttime","originalEvent","detail","time","currentchapter","find","settings","JSON","parse","advanced","locked","isPreviewMode","hasClass","lock","previousIndex","findIndex","previouschapter","hascompletion","every","completed","options","isCompleted","lockstring","addNotification","addClass","player","pause","seek","html","text","c","hide","remove","show","preventDefault","fadeOut","starttime","closest","data","play","trigger","toggleClass","slideToggle","renderEditItem","listItem","item","super","Number","isSkipped","before","M","util","get_string","renderItemOnVideoNavigation","totaltime","percentage","isVisible","classes","isClickable","container","placement","replace","prop","icon","char1","tooltip","setTimeout","animate","css"],"mappings":"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"}